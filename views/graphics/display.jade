extends ../base

block append head
	script(type='text/javascript', src='https://www.google.com/jsapi')
	| <script type='text/javascript'>
	| google.load("visualization", "1", {packages:["corechart"]});
	| google.setOnLoadCallback(drawChart);
	| function drawChart() {
	| 	var cloudantdata = [
	|			[ 'Period'
	- each action in config.showActions
					,  '#{action}'
	|			],
	- each d in data
		| ['#{d.period}'
		- each action in config.showActions
			|, #{d[action]}
		| ],	
	| 	];  
	| 	var data = google.visualization.arrayToDataTable(cloudantdata); 

	| 	var options = { 
	| 		title: 'Steps Acummulated',
	| 		hAxis: {title: 'Period', titleTextStyle: {color: 'black'}}
	| 	};

	| 	var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
	| 	chart.draw(data, options);
	| }   
	| </script>

block append body
	span #{msg}
	h1 #{patient} device information

	div#chart_div

	- each x in data
		ul
			li LS : #{x.LS}
			li RS : #{x.RS}
			li SS : #{x.SS}
			li SU : #{x.SU}
			li SD : #{x.SD}
			li docs processed : #{x.ndocs}
			li TS : #{x.TS}
			li newestTS: #{x.newestTS}
			li oldestTS: #{x.oldestTS}
